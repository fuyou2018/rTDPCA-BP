function [imgRow,imgCol,FaceContainer,faceLabel]=ReadFaces(nFacesPerPerson, nPerson, bTest)
% ??ORL???????????????(??)
%
% ???nFacesPerPerson --- ???????????????? 5
%       nPerson --- ????????????? 40 ??
%       bTest --- bool????????0???????????5??????1???????????5??
%
% ???FaceContainer --- ????????nPerson?200? * 10304 ? 2 ??????????????

if nargin==0 %default value
    nFacesPerPerson=5;%?5?????
    nPerson=40;%??????????10???5??????
    bTest = 0;
elseif nargin < 3
    bTest = 0;
end

img=imread('Data/sample/S1/1.pgm');%??????????
[imgRow,imgCol]=size(img);

%??40?*?5??200??imgRow*imgCol??????
FaceContainer = zeros(nFacesPerPerson*nPerson, imgRow*imgCol);
%??200????????
faceLabel = zeros(nFacesPerPerson*nPerson, 1);

% ??????
for i=1:nPerson    %40?
    i1=mod(i,10); % ???%???????????????
    i0=char(i/10);% ???????
%2018.11.29_FB
% num2str()????????eg. num2str(43)?????'43'??????
% char???ascii???????????char(43)??????+??????ascii??43?
   if bTest == 0 % ??????   %bTest??????????????flag
        strPath='Data/sample/S';
   else
        strPath='Data/test/S';
   end
    if( i0~=0 )  %?????????
        strPath=strcat(strPath,'0'+i0);
    end
    strPath=strcat(strPath,'0'+i1);
    strPath=strcat(strPath,'/');
    tempStrPath=strPath;
    for j=1:nFacesPerPerson   %??????????nFacesPerPerson = 5
        strPath=tempStrPath;
        
        if bTest == 0 % ??????
            strPath = strcat(strPath, '0'+j);
        else
            % ????????????5??nFacePerPreson?????2018.11.29_FB
            strPath = strcat(strPath, num2str(5+j));
        end
        
        strPath=strcat(strPath,'.pgm');
        img=imread(strPath);%????????
       
        %???????????????????????faceContainer?????2018.11.29_FB
        FaceContainer((i-1)*nFacesPerPerson+j, :) = img(:)';
        %????111112222233333...(????????40???)
        faceLabel((i-1)*nFacesPerPerson+j) = i;
    end % j
end % i

% ????????FaceMat?200*10304?????????
save('Mat/FaceMat.mat', 'FaceContainer')





